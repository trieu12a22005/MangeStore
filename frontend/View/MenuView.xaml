<UserControl x:Class="frontend.View.MenuView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:frontend.View"
             xmlns:vm="clr-namespace:frontend.ViewModel"
             d:DataContext="{d:DesignInstance Type=vm:MenuViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="525" d:DesignWidth="600"
             Background="#F6F8F9">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0"             
              Background="#FFFFFF"
              Margin="0, 0, 0, 10">
            <TextBlock Text="Menu"
                       FontSize="20"
                       FontFamily="Monsterrat"
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Left"
                       Padding="10"/>
        </Grid>
        <Grid Grid.Row="1"
              Background="#FFFFFF">
            <StackPanel>
                <!-- Bộ lọc và tìm kiếm -->
                <StackPanel Orientation="Horizontal"
                            VerticalAlignment="Top"
                            Margin="10, 10, 0, 0">
                    <ComboBox Width="auto"
                              Height="30"
                              FontFamily="Monsterrat"
                              FontSize="15"                              
                              Foreground="#000000"
                              BorderThickness="0, 0, 0, 1"
                              BorderBrush="#000000"
                              Background="#FFFFFF"
                              SelectedIndex="0"
                              VerticalContentAlignment="Center"
                              HorizontalAlignment="Left"
                              SelectedValue="{Binding SelectedCategory, Mode=TwoWay}"
                              SelectedValuePath="Content">
                        <ComboBox.Template>
                            <ControlTemplate TargetType="ComboBox">
                                <Grid>
                                    <ToggleButton x:Name="ToggleButton"
                                                  Background="{TemplateBinding Background}"
                                                  BorderBrush="{TemplateBinding BorderBrush}"
                                                  BorderThickness="{TemplateBinding BorderThickness}"
                                                  IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                                  ClickMode="Press">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <ContentPresenter Content="{TemplateBinding SelectionBoxItem}"
                                                              ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                              HorizontalAlignment="Left"
                                                              Margin="3"/>
                                            <Path Grid.Column="1"
                                                  Data="M 0 0 L 6 6 L 12 0 Z" 
                                                  Fill="#000000"
                                                  Stretch="Uniform"
                                                  Width="12"
                                                  Height="12"
                                                  Margin="5 0 5 0"
                                                  VerticalAlignment="Center"/>
                                        </Grid>
                                    </ToggleButton>
                                    <Popup x:Name="Popup"
                                           IsOpen="{TemplateBinding IsDropDownOpen}"
                                           Placement="Bottom"
                                           AllowsTransparency="True"
                                           Focusable="False"
                                           PopupAnimation="Slide">
                                        <Grid MinWidth="{TemplateBinding ActualWidth}"
                                              MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                <ScrollViewer>
                                                    <ItemsPresenter/>
                                                </ScrollViewer>
                                            </Border>
                                        </Grid>
                                    </Popup>
                                </Grid>
                            </ControlTemplate>
                        </ComboBox.Template>
                        <ComboBox.ItemContainerStyle>
                            <Style TargetType="ComboBoxItem">
                                <Setter Property="Background" Value="#FFFFFF"/>
                                <Setter Property="Foreground" Value="#000000"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#E0E0E0"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ComboBox.ItemContainerStyle>
                        <ComboBoxItem Content="Tất cả"/>
                        <ComboBoxItem Content="Đồ ăn"/>
                        <ComboBoxItem Content="Đồ uống"/>
                    </ComboBox>
                    <Border Width="200"            
                            Height="30"
                            BorderThickness="1"
                            BorderBrush="#acb0af"
                            CornerRadius="2.5"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Margin="100, 0, 0, 0">
                        <Grid VerticalAlignment="Center">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Image Source="/Images/search-line.png"
                                   Height="20"/>
                            <TextBlock x:Name="textSearch"
                                       MouseDown="textSearch_MouseDown"
                                       Text="Tìm kiếm món ăn"
                                       VerticalAlignment="Center"
                                       IsHitTestVisible="False"
                                       Style="{StaticResource textHint}"/>
                            <TextBox x:Name="txtSearch"
                                     Text="{Binding SearchText,
                                            Mode=TwoWay,
                                            UpdateSourceTrigger=PropertyChanged}"
                                     FocusVisualStyle="{x:Null}"
                                     BorderThickness="0"
                                     Background="Transparent"
                                     VerticalAlignment="Center"
                                     Style="{StaticResource textBox}"/>
                        </Grid>
                    </Border>
                </StackPanel>

                <!-- Danh sách món dưới dạng lưới -->
                <ScrollViewer Margin="10, 10, 0, 10">
                    <ItemsControl ItemsSource="{Binding FoodItems}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Width="100"
                                        Height="150"
                                        Background="#F6F8F9"
                                        Margin="5">
                                    <StackPanel HorizontalAlignment="Center"
                                                VerticalAlignment="Center">
                                        <Image Source="{Binding ImageUrl}"
                                               Width="80"
                                               Height="80"
                                               Margin="0, 0, 0, 5"/>
                                        <TextBlock Text="{Binding Name}"
                                                   HorizontalAlignment="Center"
                                                   FontSize="12"
                                                   FontFamily="Monsterrat"
                                                   Margin="0, 0, 0, 2"/>
                                        <TextBlock Text="{Binding Price,
                                                          StringFormat={}{0:N0} VND}"
                                                   HorizontalAlignment="Center"
                                                   FontSize="10"
                                                   FontFamily="Monsterrat"
                                                   Margin="0, 0, 0, 2"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
